<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shunter App - Drag & Drop Bays</title>
<style>
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  padding: 15px;
}
.container { max-width: 1400px; margin: 0 auto; }
header {
  background: white;
  padding: 20px;
  border-radius: 15px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  margin-bottom: 20px;
}
h1 { color: #667eea; font-size: 32px; font-weight: bold; text-align: center; }
.tabs { display: flex; gap: 10px; margin-bottom: 20px; }
.tab {
  flex: 1;
  padding: 18px;
  background: white;
  border: none;
  border-radius: 12px;
  font-size: 20px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.tab.active {
  background: #667eea;
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
.content { display: none; }
.content.active { display: block; }
.move-form {
  background: white;
  padding: 25px;
  border-radius: 15px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  margin-bottom: 20px;
}
.form-group { margin-bottom: 20px; }
.form-group label {
  display: block;
  font-size: 18px;
  font-weight: bold;
  color: #1f2937;
  margin-bottom: 8px;
}
.form-group select,
.form-group input {
  width: 100%;
  padding: 15px;
  font-size: 18px;
  border: 2px solid #e5e7eb;
  border-radius: 10px;
  background: white;
  transition: border-color 0.3s;
}
.form-group select:focus,
.form-group input:focus {
  outline: none;
  border-color: #667eea;
}
.move-button {
  width: 100%;
  padding: 20px;
  background: #667eea;
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 20px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.move-button:hover {
  background: #5568d3;
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}
.move-button:active { transform: translateY(0); }
.move-button:disabled {
  background: #9ca3af;
  cursor: not-allowed;
  transform: none;
}
.bay-reference {
  background: white;
  padding: 20px;
  border-radius: 15px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  margin-bottom: 20px;
}
.bay-section { margin-bottom: 15px; }
.bay-section h3 {
  font-size: 18px;
  font-weight: bold;
  color: #667eea;
  margin-bottom: 10px;
}
.bay-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}
.bay-chip {
  padding: 8px 12px;
  background: #f3f4f6;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 500;
  color: #374151;
  border: 1px solid #e5e7eb;
}
.success-message {
  background: #d1fae5;
  color: #1f1f1f;
  padding: 15px 20px;
  border-radius: 12px;
  margin-bottom: 20px;
  font-size: 18px;
  font-weight: bold;
  text-align: center;
  display: none;
}
.dashboard-table {
  width: 100%;
  background: white;
  border-radius: 15px;
  overflow: hidden;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}
.dashboard-table table {
  width: 100%;
  border-collapse: collapse;
}
.dashboard-table th {
  background: #667eea;
  color: white;
  padding: 15px;
  text-align: left;
  font-size: 16px;
}
.dashboard-table td {
  padding: 12px 15px;
  border-bottom: 1px solid #e5e7eb;
  font-size: 16px;
}
.dashboard-table tr:last-child td { border-bottom: none; }
.dashboard-table tr:hover { background: #f9fafb; }
.done-row { background: #3d3d3d; color: #353535; font-weight: bold; }
.done-row button { display: none; }
@media (max-width: 768px) {
  h1 { font-size: 24px; }
  .tab { font-size: 16px; padding: 15px; }
  .form-group label { font-size: 16px; }
  .form-group select, .form-group input { font-size: 16px; padding: 12px; }
  .move-button { font-size: 18px; padding: 18px; }
  .bay-reference { padding: 15px; }
  .dashboard-table th { font-size: 14px; padding: 12px; }
  .dashboard-table td { font-size: 14px; padding: 10px; }
}
</style>
</head>
<body>
<div class="container">
  <header><h1>üöõ Shunter App</h1></header>

  <div class="tabs">
    <button class="tab active" onclick="switchTab('move', event)">Move Bays</button>
    <button class="tab" onclick="switchTab('history', event)">History</button>
  </div>

  <!-- MOVE TAB -->
  <div id="move-content" class="content active">
    <div id="success-message" class="success-message"></div>

    <div class="move-form">
      <div class="form-group">
        <label for="from-select">üì¶ From:</label>
        <select id="from-select">
          <option value="">-- Select Bay --</option>
        </select>
      </div>

      <div class="form-group">
        <label for="to-select">üìç To:</label>
        <select id="to-select">
          <option value="">-- Select Bay --</option>
        </select>
      </div>

      <div class="form-group">
        <label for="trailer-input">üöö Trailer Number (optional):</label>
        <input id="trailer-input" type="text" placeholder="Enter trailer ID (optional)" maxlength="12">
      </div>

      <button class="move-button" onclick="submitMove()">Move~Trailer</button>
    </div>

    <div class="bay-reference">
      <div class="bay-section">
        <h3>üè¢ Building B (Bravo) - 25 Bays</h3>
        <div class="bay-list" id="bravo-list"></div>
      </div>
      <div class="bay-section">
        <h3>üè¢ Building C (Charlie) - 26 Bays</h3>
        <div class="bay-list" id="charlie-list"></div>
      </div>
    </div>
  </div>

  <!-- HISTORY TAB -->
  <div id="history-content" class="content">
    <div class="dashboard-table">
      <table>
        <thead>
          <tr>
            <th>Trailer</th>
            <th>From</th>
            <th>To</th>
            <th>Time</th>
            <th>Done</th>
          </tr>
        </thead>
        <tbody id="history-body"></tbody>
      </table>
    </div>
  </div>
</div>

<script>
let movements = [];

// Get today's date (format YYYY-MM-DD)
function getToday() {
  const d = new Date();
  return d.getFullYear() + '-' + (d.getMonth()+1) + '-' + d.getDate();
}

// Load saved data
function loadData() {
  const savedDate = localStorage.getItem('shunterDate');
  const today = getToday();

  if (savedDate !== today) {
    // New day ‚Üí clear everything
    localStorage.removeItem('shunterMovements');
    localStorage.setItem('shunterDate', today);
    movements = [];
    return;
  }

  const saved = localStorage.getItem('shunterMovements');
  if (saved) {
    movements = JSON.parse(saved).map(m => ({
      ...m,
      time: new Date(m.time)
    }));
  }
}

// Save data
function saveData() {
  localStorage.setItem('shunterMovements', JSON.stringify(movements));
  localStorage.setItem('shunterDate', getToday());
}

const bayGroups = {
  'B1':'ANDREE','B2':'ANDREE','B3':'ANDREE','B4':'ANDREE','B5':'ANDREE','B6':'ANDREE','B7':'ANDREE','B8':'ANDREE','B9':'ANDREE','B10':'ANDREE','B11':'ANDREE','B12':'ANDREE',
  'B13':'ADORJAN','B14':'ADORJAN','B15':'ADORJAN','B16':'ADORJAN','B17':'ADORJAN',
  'B18':'MARK','B19':'MARK','B20':'MARK','B21':'MARK','B22':'MARK','B23':'MARK','B24':'MARK','B25':'MARK',
  'C1':'ASDA','C2':'ASDA','C3':'ASDA','C4':'ASDA','C5':'ASDA',
  'C6':'CAOLLECTION','C7':'CAOLLECTION','C8':'CAOLLECTION','C9':'CAOLLECTION',
  'C10':'MORRISONS','C11':'MORRISONS','C12':'MORRISONS','C13':'MORRISONS',
  'C14':'TESCO','C15':'TESCO','C16':'TESCO','C17':'TESCO','C18':'TESCO','C19':'TESCO','C20':'TESCO','C21':'TESCO','C22':'TESCO','C23':'TESCO',
  'C24':'PULING','C25':'PULING','C26':'PULING'
};

const bravoBays = Array.from({length:25}, (_,i)=>'B'+(i+1));
const charlieBays = Array.from({length:26}, (_,i)=>'C'+(i+1));
const allBays = [...bravoBays, ...charlieBays, 'Yard'];

function initDropdowns() {
  const fromSelect = document.getElementById('from-select');
  const toSelect = document.getElementById('to-select');
  
  allBays.forEach(bay => {
    const fromOption = document.createElement('option');
    fromOption.value = bay;
    fromOption.textContent = bay + (bayGroups[bay] ? ` (${bayGroups[bay]})` : '');
    fromSelect.appendChild(fromOption);
    
    const toOption = document.createElement('option');
    toOption.value = bay;
    toOption.textContent = bay + (bayGroups[bay] ? ` (${bayGroups[bay]})` : '');
    toSelect.appendChild(toOption);
  });
}

function initBayReference() {
  const bravoList = document.getElementById('bravo-list');
  const charlieList = document.getElementById('charlie-list');
  
  bravoBays.forEach(bay => {
    const chip = document.createElement('div');
    chip.className = 'bay-chip';
    chip.textContent = `${bay} - ${bayGroups[bay]}`;
    bravoList.appendChild(chip);
  });
  
  charlieBays.forEach(bay => {
    const chip = document.createElement('div');
    chip.className = 'bay-chip';
    chip.textContent = `${bay} - ${bayGroups[bay]}`;
    charlieList.appendChild(chip);
  });
}

function submitMove() {
  const fromSelect = document.getElementById('from-select');
  const toSelect = document.getElementById('to-select');
  const trailerInput = document.getElementById('trailer-input');
  const successMsg = document.getElementById('success-message');
  
  const from = fromSelect.value;
  const to = toSelect.value;
  const trailer = trailerInput.value.trim();
  
  if (!from || !to) {
    alert('Please select both FROM and TO locations');
    return;
  }
  if (from === to) {
    alert('FROM and TO cannot be the same');
    return;
  }

  movements.unshift({
    from: from,
    to: to,
    trailer: trailer || '-',
    time: new Date(),
    done: false
  });

  saveData();
  
  successMsg.textContent = trailer
    ? `‚úÖ Trailer ${trailer} moved from ${from} ‚Üí ${to}`
    : `‚úÖ Moved ${from} ‚Üí ${to}`;
  successMsg.style.display = 'block';
  setTimeout(() => { successMsg.style.display = 'none'; }, 3000);
  
  fromSelect.value = '';
  toSelect.value = '';
  trailerInput.value = '';
  
  loadHistory();
}

function loadHistory(){
  const hb = document.getElementById('history-body');
  hb.innerHTML='';
  movements.slice(0,50).forEach((m,index)=>{
    const time = new Date(m.time).toLocaleString('en-GB',{day:'2-digit',month:'2-digit',hour:'2-digit',minute:'2-digit'});
    hb.innerHTML += `<tr data-index="${index}" class="${m.done?'done-row':''}">
      <td>${m.trailer || '-'}</td>
      <td>${m.from}</td>
      <td>${m.to}</td>
      <td>${time}</td>
      <td><button onclick="markDone(${index})">‚úÖ</button></td>
    </tr>`;
  });
  if(movements.length===0)
    hb.innerHTML='<tr><td colspan="5" style="text-align:center; color:#9ca3af;">No moves yet</td></tr>';
}

function markDone(index){
  movements[index].done = true;
  saveData();
  loadHistory();
}

function switchTab(tab,event){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.content').forEach(c=>c.classList.remove('active'));
  event.target.classList.add('active');
  document.getElementById(`${tab}-content`).classList.add('active');
}

// Initialize
loadData();
initDropdowns();
initBayReference();
loadHistory();
</script>

</body>
</html>

